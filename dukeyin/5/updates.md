# 更新记录

## Duke Yin 1.3.7.3

2022年2月22日

1. 自动获取相关模板页地址，选项中无需再填写大部分页面地址了。
2. 主题选项大改版，新增状态栏。
3. 新增了Gravatar头像CDN设置选项，可以任意选择5种Gravatar CDN。
4. 翻译更新。

## Duke Yin 1.3.7.2

2022年2月18日

1. 主题选项中新增了从CDN载入必要资源的选项，如果关闭则从本地加载。
2. CDN经过多方测试，还是staticfile比较快，所以全部用staticfile的cdn。

## Duke Yin 1.3.7

2022年2月16日

1. 因为文档站点变更，更新了主题于文档站点的链接；
2. 因为jsdelivr cdn在某些地区十分慢，换成了staticfile；
3. 归档（Archive）模板更好了，可以收缩之前的年份；
4. 新增了书籍、电影、游戏等多个图标用于评单文章，一些旧图标修改为更统一的风格；
5. 变更了弹幕库的地址，于主题选项中默认为可用的弹幕库服务器；
6. 翻译优化；

## Duke Yin 1.3.6

2022年2月8日

1. 优化了iframe的样式；
2. 优化了插入Bilibili视频的样式；
3. 将新增区块移至Duke Yin helper 插件，主题不再负责区块任务；
4. ；优化了商品扫码付款的界面，会显示当前的商品名称及价格；
5. 修复了首页提示后带一个单引号的bug；
6. SEO优化

## Duke Yin 1.3.5

2021年12月28日

1. ；修正了一些拼写错误
2. 游戏评单的分数计算优化
3. 优化了主题选项的界面

## Duke Yin 1.3.4

2021年12月05日

1. 评单的单页上增加状态显示；
2. 所有文章单页内的代码和预格式内容改为可选择、可复制。



## Duke Yin 1.3.3

2021年10月17日

1. 评单添加特色图像支持
2. 评单添加更多的细化选项
3. 游戏的分类可翻译
4. 修复了一个导致认证失败的错误
5. 一些必要的图片改为Webp格式
6. 修复了深色模式下手机顶部的空白颜色
7. 修复了摄影、作品集、评单、自拍的分类链接
8. 修复了状态文章标题太大的问题
9. 略微缩小了顶部菜单空隙，修复了服务图片的长宽比
10. 优化了视频字幕的样式。



## Duke Yin 1.3.2

2021年08月22日

1. 进一步压缩脚本文件
2. footer的脚本统一移动到脚本文件内
3. 修复了Caption注释的颜色在深色模式下的样式
4. 依然修复了一些IE下的、可以修复的内容
5. siotope排序动画优化
6. 设定为允许访问者可以选择复制除了文章内容之外的所有其他内容
7. 修复了搜索结果标题过于复杂的bug
8. 添加了许可证验证的机制
9. 修复了一些拼写错误
10. 优化了评单文章的一些错误



## Duke Yin 1.3.1

2021年07月14日

1. 将视频播放按钮集合到iconfont
2. 视频默认质量改为720p
3. 删除了视频和作品集模板的按分类过滤查看的按钮
4. 为所有图片加入WordPress自带的懒加载Lazy Load
5. 优化视频脚本，优化视频缩略图
6. 视频文章 添加bilibili视频支持
7. 防止视频和音频被轻易下载
8. 添加从CDN加载jQuery的选项
9. 添加了收藏夹模板，修复视频弹幕库
10. 懒加载导致图片错位，所以添加了图片宽高参数
11. 添加自定义弹幕库地址的主题选项
12. 添加了Girl的模板
13. 首页导航添加了大图透明选项
14. 优化了评单模板
15. 添加了全站灰色的选项用于坏的纪念日
16. SEO优化
17. 添加手机Web应用的Splash 图像



## Duke Yin 1.3.0

2021年06月23日

1. 修复了首页幻灯片点点顶部太窄的错误
2. 移除了导航栏右边的分割线
3. 修复了点击取消回复会导致页面消失的bug
4. 修复了Cookie使用通知不出现的bug
5. 添加了表单提交的检测防止错误提交
6. 添加了新的emoji CDN
7. 管理员可以在前端回复，但冒用管理员的名字email的不能
8. 清理评论脚本，修复留言板管理问题
9. 添加了视频格式文章，支持Dplayer
10. 翻译更新



## Duke Yin 1.2.9

2021年06月15日

1. 简化了回复通知邮件的内容
2. 音乐列表模板增加分页导航
3. 增加MediaSession功能，在支持的浏览器可以显示目前在播放的音乐。
4. 改为WordPress内置jQuery
5. 更新了Owl.carousel脚本的版本
6. 优化了脚本和样式
7. 修复了手机前进和后退的页面转换脚本
8. 单个文章新增了关闭特色图像的功能选项
9. 移除了彩虹多边形效果。
10. 新增了归档模板，不再依赖SimpleYearlyArchive插件
11. 修复了通知界面在深色模式下的进度条颜色
12. 修复了音乐页面的翻译脚本



## Duke Yin 1.2.8

2021年06月05日

1. 音乐页面会按照歌曲切换页面标题
2. 音乐文章新增艺术家和风格模板
3. 切换为压缩的脚本文件
4. 新增更加明显的音乐控制按键
5. 搜索模板优化



## Duke Yin 1.2.7

2021年05月18日

1. 评单文章增加分割线，增加更多游戏设备和分类，修复发布日期的bug；
2. 评单文章新增书籍子类；
3. 修正音乐文章标题图像；
4. 新增所有音乐模板；
5. 新增切换音乐时候的通知；



## Duke Yin 1.2.5 1.2.6

2021年01月14日

1. “榜单”文章新增影视和游戏的详细信息输入口，并可以在单页中显示。
2. “榜单”的文章摘要将作为短评在单页和列表页显示。
3. 之前以文章发布时间作为榜单作品的推出时间，现在新增了一个“发布时间”选项。
4. 新增了书籍类型的榜单。
5. 榜单类似于豆瓣读书、电影、音乐的整合体，可以评分，写评测。



## Duke Yin 1.2.4

2020年12月25日

1. 优化了深色模式下一部分元素的配色
2. 优化了区块表格在深色、亮色模式下的表现
3. 精简了部分无用的样式



## Duke Yin 1.2.3

2020年09月22日

1. RSS语录界面样式完善；
2. 修正了主题菜单在手机上的子菜单指示
3. 添加了音乐和歌单功能



## Duke Yin 1.2.2.1

2020年09月08日

1. 修正了文章内引用的样式；
2. 添加了emoji的CDN；
3. 添加了提醒用户本站使用Cookie的功能，在设置处开启；
4. 后台的自定义通知，加入cookie支持，当用户第一次关闭后不再显示；
5. 翻译更新。



## Duke Yin 1.2.1

2020年08月28日

1. 更新了大部分js css依赖库的版本；
2. 修复一个导致古滕堡编辑器指示编辑框错乱的bug；
3. 编辑器样式（editor-style）更新。



## Duke Yin 1.2.0.8

2020年08月25日

1. 缺失插件的通知可以关闭了
2. 添加了Patallax效果到题图背景，有可能会影响性能，但这是发展趋势，日后会添加手动开关
3. “画廊”日志类型现在支持古腾堡区块编辑器了，新增文章，添加一个相册即可
4. 自定义主题主色调和默认logo的颜色现已上线。



## Duke Yin 1.2.0.6

2020年08月20日

1. 修正了搜索按钮和X关闭按钮的位置和留白；
2. 修正了部分按钮的尺寸；
3. 修正了首页PHP的提示“Undefined variable”的问题，虽然此问题在非Debug模式下不可见；
4. 将仪表盘小工具“主题支持”转移到插件“duke yin helper”，更符合主题标准；
5. 添加了“服务”文章类型，用于商业网站在首页显示公司的服务类型；
6. 添加了“捐赠二维码”的后台选项，二维码可以在后台自定义了，且当用户不设置自定义二维码图片的时候，前端页面不显示捐赠或购买按钮；
7. 底部社交媒体图标的设置，将默认为空，不显示，仅当用户设置了各个账号，才显示；



## Duke Yin 1.2.0.2

2020年07月30日

1. 修正了深色模式的样式
2. 根据最新的Wordpress主题标准修正了一些代码表达方式



## Duke Yin 1.2.0

2020年05月20日

1. 增加了选项以隐藏或显示首页的各大版块
2. 增加选项选择首页显示RSS或赠言文章
3. 略微加入了WooCommerce的支持，顶部导航在WC激活后会有购物车按钮
4. 调整了手机模式的导航菜单和按钮。
5. wp-wall留言插件从现在起开始由我维护，日后请在[此处](https://github.com/yduke/wp-wall/releases)下载新版。



## Duke Yin 1.1.9

2020年05月17日

1. 修复了亮色和暗色logo不能随背景切换的问题
2. 略微增加了自定义logo的大小
3. 优化了通知在手机里显示的样式。
4. 插件dukeyin helper增加一种文章形式“赠言”，作为“语录”的另一种可选形式。



## Duke Yin 1.1.8

2020年05月15日

1. 主题现在可以在Wordpress后台自动更新了，无需覆盖压缩包。
2. 修正了一个在移动设备切换暗黑模式和正常模式时页面渲染不完整的错误。
3. 修复了新激活主题时会提示meta-block出现空值的问题。
4. 新增功能：所有文本框（主要是评论框）随内容自动调整大小。
5. 微信分享按钮和其他按钮的间距现在均分了。
6. 微信分享仅在桌面浏览时出现。
7. 修复了如果文章页没有特色图像控制台js会报错的问题。
8. 重制了留言板插件 WP-wall，适应最新版WordPress以及深色模式配色
9. 通知样式做了一些调整。
10. 文本在深色模式下和背景对比度过高所以调暗了。



## Duke Yin 1.1.6

2020年3月1日

1. 修正一些了移动模式下菜单的样式；
2. 增加自定义底部“时光捕手”链接的自定义选项；
3. 增加了首页语录的签名自定义选项；



## Duke Yin 1.1.5

2019年7月6日

1. 开始进行原有Meta box到新版Meta Block的交替；
2. Post的副标题现在由MetaBlock负责；
3. 新增了一个“排行榜”文章类型，按分类实现各种榜单： https://www.dukeyin.com/reviews/games/
4. Block Editor很先进，有点难学，目标是把所有短代码转为Block，需要时日。
5. 移动端样式优化，修复bug。



## Duke Yin 1.1.4

*2019年6月29日*

1. 摒弃了parallax.js，因为发现它会影响网页性能；
2. 完善了单文章分页的功能和样式；
3. 规范了自动切换深色模式时候的通知文字——用户系统主题色和时间；
4. 完成了长文章分页功能，样式美化；
5. 彻底解决了DukeYin Helper中短代码和手机主题冲突的问题。



## Duke Yin 1.1.3

*2019年6月12日*

1. 规范统一了“归档”和“搜索结果页”的分页按钮样式
2. 修正了script.js中一个重复声明的错误。



## Duke Yin 1.1.2.1

*2019年6月9日*

1. 通知消息的一部分是写在js文件里的，用wp5.0引入的wp_localize_script()函数进行翻译。
2. 定性名称为“深色模式”，切换的深色模式的js进行了调整完善。
3. 图片alt功能取消了站点名称，更简洁了。
4. 弃用“百度统计”，因为有时候会极大的拖慢加载速度。



## Duke Yin Helper 1.0.1

*2019年6月7日*

1. 添加了helper的helper.php，以后的新function用插件实现；
2. 添加了文章图片的alt和title自动生成的功能，所有内容图片的alt和tile标签与单页标题统一，有利于SEO。
3. 激活插件后自动生成，旧文章有效。图片不用一一去写alt了。



## Duke Yin 1.1. 2

*2019年6月6日*

![img](\assets\notifications.jpg)

新通知样式

1. 使用一个叫toastr的jQuery通知插件替换了自定义通知方式，修改样式如上
2. 当多个通知并存的时候，通知会自动错开。通知变为全站全局通知，而非仅首页。
3. 后台的通知设置新增标题和图标设置
4. 切换NightMode的时候，会有简短的通知告知现在是什么模式。
5. 顶部加载进度条由原来的橙色变为主题蓝色。
6. 当使用IE浏览此主题的站点的时候，不论哪个页面都会弹出警告，建议更换浏览器。
7. 修正了所有类型文章单页的“编辑”按钮位置。



## Duke Yin 1.1.1

2019年6月5日

1. Dark Mode切换时，图标会在月亮和太阳之间切换。
2. 完善了Dark Mode之下，各元素的配色。
3. 手机主题也增加了Dark Mode。
4. 修正了归档页面没有页码导航的bug。
5. 修正了登录后“编辑”按钮各页面不统一的缺陷。
6. [Duke-Yin-Helper]修正了自定义文章没有作者字段的bug。
7. 统计代码的位置由顶部移至了底部。
8. a3 lazy load 插件和 GIF preview插件有冲突，通过修改GP插件避免了冲突。
9. 统一了所有图标的样式。
10. 底部社交图片稍微放大了一点。



## Duke Yin 1.10

*2019年6月1日*

### Dark Mode

新增加了全站Dark Mode“夜间模式”，抢在iOS之前蹭热度。

1. Dark Mode是全自动的，根据客户端时间自动切换亮色暗色。
2. 20:00至5:59为黑暗模式，护眼护心
3. 6:00至19:59为之前的亮色模式。
4. 依靠Cookie维持当前的亮/暗模式，当网页彻底关闭时，Cookie过期，再次打开网站时重新读取当前时间并写入Cookie。
5. 也可随时手动点击顶部导航栏“?”图标切换亮/暗模式。



### 小问题修正

1. 修正了当“诗词”单页模板有特色图像的时候显示不正确的bug；
2. 修正了几处HTML核验不规范的错误；
3. 弃用了之前主题的default.png
4. 去掉了相册、图像、状态、音乐、视频几种文章形式图标的颜色，统一为灰色。



## Duke Yin 1.0.7

*2019*年*5*月*29*日

- 每个单页的底部导航用函数隐藏了h2标题。
- 丰富了“相关文章”的样式。目前变为左右滑动幻灯，带特色图像。



## Duke Yin 1.0.6.1

*2019年5月28日*

前几天用 wp_enqueue_script 加载所有Javascript文件，导致jQuery加载了两次，Wordpress自己会 默认加载一次，我又加了一个，所以导致Ajax Comment出错。我就说这几天没有评论呢？

- 修正了jQuery重复加载的问题，使用CDN加载2.1.4版的jQyery
- 主题的主JS： script.js做了压缩，体积更小了，目前是 scripts-min.js



## Duke Yin 1.0.6

*2019年5月27日*

因为1.0.3把文章类型和短代码分出到插件Duke Yin helper负责，所以：

1. 主题中添加了插件依赖警告，在没有激活DukeYin helper时候，会出现警告提示
2. 修正了functions.php的一些语法规范问题
3. 同时更新了翻译。
4. footer还单独有一些js，并入主题scripts.js文件里了
5. 完善了部分文档



## Duke Yin 1.0.5

*2019*年*5*月*23*日

1. 主题原先集成了OpenSans字体，发现对样式改善不大还增大体积，取缔了。
2. 原先摄影、自拍和商品单页不显示标签和分类，已修正显示。
3. 原先写的RandomImage()函数，因为后来有了trianglify插件，不再需要了，所以删除了，同时删除了img目录下的四张图。
4. 修正一些翻译上的错误。



## Duke Yin 1.0.4

*2019*年*5*月*22*日

1. 所有主题所需的js和css文件，改为用wp_enqueue_script加载，更为规范。
2. 使用Wordpress内置jQuery，并置于底部。
3. 一些变量名称因为容易与Wordpress内部变量混淆，修改了变量名。
4. 本地化部分由之前_e()函数修改为esc_attr_e()，更加安全。
5. 重新完善了中文翻译以及语言包文件。



## Duke Yin 1.0.3

*2019*年*5*月*20*日

在Theme check的时候被提示：Wordpress不提倡在主题中集成自定义文章类型（post type）和短代码（short code），这些都是插件的工作。否则一旦换主题，用户的数据就看不到了。一想也有道理。

1. 写了个插件叫“Duke Yin Helper” 负责给主题加自定义文章类型以及短代码。
2. 主题中自定义文章类型和短代码的部分删去。
3. 给DYH插件做了翻译。
4. 目前，当激活主题及此插件后，与原先效果一致，如果不激活插件，后台看不到自定义文章类型，前台短代码也会失效。



## Duke Yin 1.0.2

*2019年5月15日*

1. 修正了 当选项中“排除分类”为空的时候，Debug模式会出现提示的问题。
2. 修正了 当选项中“备案号”为空的时候，Debug模式会出现提示的问题。
3. 完善了“密码保护”文章填写密码的样式。



## Duke Yin 1.0.1.4

*2019年5月13日*

1. 归档页面有点繁杂，所以每个日期前的年份去掉了，大年份用H3标题显示，去掉了分类。
2. 归档页头的年份链接，现在使用Smooth scroll了。（插件Simple Yearly Archive)
3. 博客、诗词、画作、照片、商品和搜索结果模板加入了动画，刚打开的时候，各个区块有masonry动画效果
4. 留言小工具的按钮，由原有的PNG图换成了矢量图标。



## Duke Yin 1.0.1.3

*2019年5月12日*

1. 修正了更多“文章形式”博客文章在没有标签的情况下不会显示版权及相关文章的bug。
2. 修正了视频和音频文章格式在新的Gutenberg编辑器中不会显示Metabox的bug。
3. 主题选项中添加了“站点成立日期”用于计算归档模板中的在线天数。
4. 修正了一些短代码的小问题，并且极大的完善了[短代码的说明文档](https://www.dukeyin.com/shortcode/)。
5. 页脚的版权声明分栏增加了长度，这样自定义文字多的话尽可能减少换行的可能性。



## Duke Yin 1.0.1.2

*2019年5月12日*

1. 修正了一个“相关日志”功能的逻辑错误，如果文章没有标签的话，现在也能正确显示相关日志了。
2. 修正了自定义文章类型“作品集”没有“标签”功能的瑕疵。
3. 所有自定义文章类型更换为新潮的“古腾堡”编辑器（Gutenberg）。
4. 完善了配套手机主题“Now”的全英文界面，并且完成了中文翻译。



## Duke Yin 1.0.1.1

*2019年5月1日*

1. 原有parallax.js在新版本浏览器规则下会出现报错且滚动页面时造成浏览器卡顿，所以被取缔。
2. 换上了一个较为完善的不报错的[parallax.js](https://github.com/pixelcog/parallax.js/tree/v2.0.0-alpha)
3. 新脚本可控性更强，并且和原先效果几乎完全一样，关键是不报错且不卡顿了。



## Duke Yin 1.0.1

*2018年12月*

1. 新建“首页幻灯片”功能新增一个选项，可以让用户选择是否在幻灯片上方显示标题。
2. 主题选项新增“商店页面URL”，用于单页的返回列表功能。
3. 修正了作品集单页的返回功能
4. 一些翻译的修正和完善



## Duke Yin 1.0

*2018年7月*

1. 替换原有主题上线
2. 有一些数据兼容的问题，做了一些调整。
3. 开始使用七牛作为CDN，开启了精简代码和缓存
4. 

## Duke Yin 0.5 Beta

*2018年6月*

1.  与原有主题以及手机主题短代码的适配；
2. 修复多个CSS和JS的错误。
3. 主题页面模板中写的不完善的地方修复



## Duke Yin 0.4 Beta

*2018年6月*

1.  完善了文章评论的逻辑，修复了错误；
2. 尝试使用V2EX的Gravatar CDN，但是因为有时候会抽，所以换回https的了
3. 规范了整站的界面翻译，先写好了英文语言包，然后用poedit翻译了中文版本。
4. 新增了“幻灯列表”模板，这样早期的幻灯封面就能看得见了。



## Duke Yin 0.3 Beta

*2018年5月*

停滞了一段时间，好些问题还没有解决。

博客列表中的各种文章类型的展示做了很多调整，最后“日志”“音乐”和“相册”在没有缩略图的时候使用图标作为缩略图，而“状态”则显示作者头像和名字。

使用trianglify这个插件生成随机的多边形图片，在博客文章没有缩略图的时候使用随机多边形图像作为缩略图。

使用qrious这个插件在每篇文章的微信分享按钮按下之后生成文章URL的二维码。



## Duke Yin 0.2 Beta

*2018年4月*

尝试了多种切图插件，最后选择了[Aqua-Resizer](https://github.com/syamilmj/Aqua-Resizer)，这个插件很不错：

只有一个php文件，直接在functions调用，全站使用Wordpress内置切图机制切图。

各种特色图像、缩略图、小图片的获取得到了解决。



## Duke Yin 0.1 Beta

*2018年4月*

大致的主题框架已经建立完成，各功能正常，虽然问题还很多，但是雏形已经形成。

取个啥名呢？取名什么的最头痛了，好的就叫自己的名字吧。



## 准备：与老主题的匹配

*2018年3月*

丢弃了之前绝大部分代码，重新开始写。

Wpjam这个插件的作者要么几年不更新，要么一更新就强制要求你服务器必须要装某东西，还要微信扫描，意识到这是一个巨大的隐患，从而摒弃了这个插件，开始寻求新的切图解决方案。

原主题的幻灯、作品、摄影、商店等自定义文章代码有一些瑕疵，修复了瑕疵。

原主题的文章形式：标准、日志、状态、音频、视频、相册、图像得以保留，但是展示方式与现有样式有冲突，先全部用标准文章样式代替。



## 准备：Wordpress Starter Theme

*2017年8月*
经过几番选取和考量，最后选用了UNDERSCORES这个StarterTheme作为主题的基础，尝试将静态资源融合进StarterTheme。
依然尝试匹配Wpjam这个插件，使用其内置的函数切割图片并连接七牛。
遇到很多问题，并且未达到预期的效果，所以开发暂时搁置。



## 准备：静态HTML

*2017年7月*
开始主题的静态页面资料收集和设计。